version: 2

models:
  - name: silver__fungiblestore_owners
    description: |
      Tracks ownership of fungible stores over time.
      Each row represents a change in store ownership, with the latest owner for each store address at a given timestamp.
      The model processes data from March 2025 and maintains incremental updates.
    
    columns:
      - name: block_timestamp
        description: Timestamp of the block when the ownership change occurred
        tests:
          - not_null
      
      - name: block_date
        description: Date of the block when the ownership change occurred
        tests:
          - not_null
      
      - name: block_number
        description: Block number of the ownership change
        tests:
          - not_null
      
      - name: transactions_id
        description: Unique identifier for the transaction (surrogate key)
        tests:
          - not_null
          - unique
      
      - name: change_index
        description: Index of the change within the transaction
        tests:
          - not_null
      
      - name: store_address
        description: Address of the fungible store
        tests:
          - not_null
      
      - name: owner_address
        description: Address of the store owner
        tests:
          - not_null
      
      - name: _inserted_timestamp
        description: Timestamp when the record was first inserted
        tests:
          - not_null
      
      - name: modified_timestamp
        description: Timestamp of when this record was last modified
        tests:
          - not_null
      
      - name: _invocation_id
        description: Unique identifier for the dbt run that inserted this record
        tests:
          - not_null 
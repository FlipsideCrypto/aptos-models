version: 2

models:
  - name: silver__balances
    description: |
        DEPRECATED: This model is superseded by silver__bals + silver__bals_daily.
        Please use the new two-layer architecture instead.

        Original description: Daily balance snapshots for ALL Aptos fungible assets (coins and fungible assets).

    tests:
      - dbt_constraints.primary_key:
          column_name: BALANCES_ID

    columns:
      - name: BLOCK_DATE

      - name: ADDRESS
        description: '{{ doc("address") }}'

      - name: TOKEN_ADDRESS
        description: '{{ doc("token_address") }}'

      - name: POST_BALANCE

      - name: FROZEN
        description: |
          Account freeze status (FungibleAsset-specific field).
          - TRUE: Account/store is frozen (cannot transfer)
          - FALSE: Account is active
          - For Coin standard balances: Always FALSE (Coin doesn't support freezing)

      - name: IS_VERIFIED
        description: |
          Whether the token has verified price data.
          - TRUE: Token exists in price__ez_prices_hourly with is_verified = TRUE
          - FALSE: Token has no verified price data

      - name: BALANCES_ID
        description: '{{ doc("pk") }}'
        tests:
          - unique:
              where: block_date > current_date - 3

      - name: INSERTED_TIMESTAMP
        description: '{{ doc("inserted_timestamp") }}'

      - name: MODIFIED_TIMESTAMP
        description: '{{ doc("modified_timestamp") }}'

      - name: _INSERTED_TIMESTAMP

      - name: _INVOCATION_ID
